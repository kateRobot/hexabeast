#ifdef _MSC_VER
#include <windows.h>
#endif

#include <stdio.h>
#include <vector>
#include <exception>

#include <SMObject.h>
#include <SMStruct.h>
#include <conio.h>

#define NEW_HEIGHT		120
#define NEW_WIDTH		160

using namespace std;

/*----------------------------------------------------------------------------*/

int main(int argc, char* argv[])
{
	
  SMObject CameraObj(TEXT("CameraData"), sizeof(Camera));
	SMObject PMObj(TEXT("ProcessManagement"), sizeof(ProcessManagement));
	// Request access to GPS mem block
	CameraObj.SMAccess();
	PMObj.SMAccess();

	//HWND hWnd = GetConsoleWindow();
	//ShowWindow(hWnd, SW_HIDE);// SW_SHOWMINIMIZED);//SW_SHOW, SW_HIDE

	ProcessManagement* PM = (ProcessManagement*)PMObj.pData;
	Camera* pCamera = (Camera*)CameraObj.pData;

	//PM->ShutDown.Flags.Camera = 0;

	//my stuff
  
  
	// Quit the main loop after 200 depth frames received
	if (g_dFrames == 200000000000000){// || _kbhit()) {
		PM->HeartBeat.Flags.Arduino = 1;
		g_context.quit();
	}
	return 0;
}
